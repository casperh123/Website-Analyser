@using WebsiteAnalyzer.Core.Entities
@using WebsiteAnalyzer.Web.Components.CacheWarm.Cards

@if (CacheWarms.Any())
{
    <RadzenStack class="rz-mt-12">

        <RadzenText TextStyle="TextStyle.H2">Previous Cache Warms</RadzenText>

        <RadzenStack Gap="20px">
            @foreach (CacheWarm cacheWarm in CacheWarms)
            {
                <CacheWarmCard OnRerunWarm="OnCacheWarmRerun" CacheWarm="cacheWarm"/>
            }
        </RadzenStack>
    </RadzenStack>
}

@code {
    [Parameter]
    public required IEnumerable<CacheWarm> CacheWarms { get; set; }
    
    [Parameter]
    public EventCallback<Website> OnRerunCacheWarm { get; set; }

    public async Task OnCacheWarmRerun(CacheWarm cacheWarm)
    {
        if (OnRerunCacheWarm.HasDelegate)
        {
            await OnRerunCacheWarm.InvokeAsync(cacheWarm.Website);
        }
    }
}