@using WebsiteAnalyzer.Core.Contracts.BrokenLink
@using WebsiteAnalyzer.Web.Components.General.Toggles

<RadzenCard Variant="Variant.Outlined">
    <RadzenRow JustifyContent="JustifyContent.SpaceBetween">
        <RadzenRow>
            <RadzenStack>
                <RadzenText TextStyle="TextStyle.Body1">Url</RadzenText>
                <RadzenText TextStyle="TextStyle.Body2">@Crawl.Url</RadzenText>
            </RadzenStack>
            <RadzenStack>
                <RadzenText TextStyle="TextStyle.Body1">Links Checked</RadzenText>
                <RadzenText TextStyle="TextStyle.Body2">@Crawl.LinksChecked</RadzenText>
            </RadzenStack>
            <RadzenStack>
                <RadzenText TextStyle="TextStyle.Body1">Date</RadzenText>
                <RadzenText TextStyle="TextStyle.Body2">@Crawl.LocalTime</RadzenText>
            </RadzenStack>
            <RadzenStack>
                <RadzenText TextStyle="TextStyle.Body1">Broken Links</RadzenText>
                <RadzenText TextStyle="TextStyle.Body2">@Crawl.BrokenLinks.Count</RadzenText>
            </RadzenStack>
        </RadzenRow>
        <RadzenRow JustifyContent="JustifyContent.Center" AlignItems="AlignItems.Center">
            <ToggleChevron @bind-Open="_open"/>
        </RadzenRow>
    </RadzenRow>
    
    @if (_open)
    {
        <BrokenLinksStats BrokenLinks="Crawl.BrokenLinks"/>
    }
</RadzenCard>

@code {
    [Parameter] 
    public required BrokenLinkCrawlDTO Crawl { get; set; }

    private bool _open = false;
}
